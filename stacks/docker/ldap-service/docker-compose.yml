# ====================================================================
# Stack: ldap-service
# Endpoint: endpoint-11
# Source: Portainer stack ID 54 (portainer_dump\compose\54\docker-compose.yml)
# Generated: 2025-08-29 19:40:09
#
# What this does:
# - Docker Compose stack exported from Portainer.
# - Includes the following services (name : image):
#   - ldap : osixia/openldap:1.5.0
#   - ldap-admin : osixia/phpldapadmin:latest
#
# How to deploy:
# - Ensure any referenced volumes/networks exist.
# - Create/update a .env file if needed.
# - Run: docker compose up -d
# ====================================================================
version: "3.8"

services:
  ldap:
    image: osixia/openldap:1.5.0
    container_name: openldap
    environment:
      LDAP_ORGANISATION: "Corleone"
      LDAP_DOMAIN: "gnzaga.com"
      LDAP_ADMIN_PASSWORD: "${LDAP_ADMIN_PASSWORD}" # moved to .env
    ports:
      - "389:389" # LDAP
      - "636:636" # LDAPS
    volumes:
      - ${LDAP_PORT1}:/var/lib/ldap
      - ${LDAP_PORT2}:/etc/ldap/slapd.d

  ldap-admin:
    image: osixia/phpldapadmin:latest
    container_name: phpldapadmin
    environment:
      PHPLDAPADMIN_HTTPS: "false"
      PHPLDAPADMIN_LDAP_HOSTS: "ldap"
    ports:
      - "8081:80" # Access phpLDAPadmin on localhost:8080
    depends_on:
      - ldap

volumes:
  ldap_data:
  ldap_config:
